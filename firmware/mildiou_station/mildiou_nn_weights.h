/*
 * ============================================================
 * RÉSEAU DE NEURONES POUR PRÉDICTION DU MILDIOU
 * ============================================================
 * Gén��ré le:  2026-01-14 10:09:56
 * Architecture: [25, 20, 10, 3]
 * 
 * Features utilisées (AVEC PRESSION):
 *    1. meantemp
 *    2. humidity
 *    3. meanpressure
 *    4. temp_trend_3d
 *    5. humidity_trend_3d
 *    6. pressure_trend_3d
 *    7. temp_ma5
 *    8. humidity_ma5
 *    9. pressure_ma5
 *   10. humidity_ma7
 *   11. temp_std7
 *   12. humidity_max7
 *   13. pressure_min7
 *   14. pressure_anomaly
 *   15. pressure_dropping
 *   16. consecutive_temp_favorable
 *   17. consecutive_humidity_high
 *   18. consecutive_both
 *   19. consecutive_low_pressure
 *   20. risk_accumulator
 *   21. day_sin
 *   22. day_cos
 *   23. high_risk_season
 *   24. temp_humidity_interaction
 *   25. humidity_pressure_interaction
 */

#ifndef MILDIOU_NN_WEIGHTS_H
#define MILDIOU_NN_WEIGHTS_H

#include <Arduino.h>

// ============== ARCHITECTURE ==============
const unsigned int NN_LAYERS[] = {25, 20, 10, 3};
const unsigned int NN_NUM_LAYERS = 4;
const unsigned int NN_INPUT_SIZE = 25;
const unsigned int NN_OUTPUT_SIZE = 3;

// ============== NORMALISATION ==============
// Formule: input_norm = (input - mean) / std

const float FEATURE_MEANS[25] = {
    25.495521f,
    60.771702f,
    1008.182687f,
    0.009973f,
    0.009006f,
    -0.001456f,
    25.490350f,
    60.762664f,
    1008.182678f,
    60.766091f,
    1.452869f,
    71.312282f,
    1005.403648f,
    -4.817313f,
    0.043776f,
    12.632011f,
    1.542408f,
    0.423393f,
    26.278386f,
    0.484811f,
    0.000024f,
    0.001368f,
    0.670315f,
    0.369744f,
    0.320716f
};

const float FEATURE_STDS[25] = {
    7.345589f,
    16.763916f,
    7.806124f,
    2.477467f,
    12.527666f,
    4.187466f,
    7.233933f,
    15.349037f,
    7.410857f,
    15.010175f,
    0.690901f,
    16.012232f,
    9.488141f,
    7.806124f,
    0.204596f,
    19.910333f,
    3.722677f,
    1.147447f,
    40.788012f,
    0.144463f,
    0.706623f,
    0.707589f,
    0.470099f,
    0.116001f,
    0.135831f
};

// ============== NOMS DES FEATURES ==============
const char* FEATURE_NAMES[] = {
    "meantemp",
    "humidity",
    "meanpressure",
    "temp_trend_3d",
    "humidity_trend_3d",
    "pressure_trend_3d",
    "temp_ma5",
    "humidity_ma5",
    "pressure_ma5",
    "humidity_ma7",
    "temp_std7",
    "humidity_max7",
    "pressure_min7",
    "pressure_anomaly",
    "pressure_dropping",
    "consecutive_temp_favorable",
    "consecutive_humidity_high",
    "consecutive_both",
    "consecutive_low_pressure",
    "risk_accumulator",
    "day_sin",
    "day_cos",
    "high_risk_season",
    "temp_humidity_interaction",
    "humidity_pressure_interaction",
};

// ============== POIDS DU RÉSEAU ==============

// Couche 1:  25 entrées → 20 sorties
const float PROGMEM WEIGHTS_L1[500] = {
      0.391112f,   0.113573f,   0.218959f,   0.038873f,  -0.025433f,   0.139129f,
      0.042928f,   0.287971f,   0.125007f,   0.165310f,   0.187447f,  -0.026097f,
     -0.026515f,   0.052077f,  -0.336381f,   0.134921f,   0.222507f,  -0.275242f,
      0.364000f,  -0.279446f,   0.084408f,  -0.315917f,   0.037962f,   0.273089f,
     -0.122050f,  -0.023521f,  -0.014050f,  -0.174611f,   0.059984f,  -0.059398f,
     -0.050925f,  -0.117065f,   0.147719f,  -0.062468f,   0.094862f,   0.052842f,
      0.004908f,  -0.040869f,  -0.005151f,  -0.003500f,   0.461221f,  -0.360152f,
     -0.387829f,  -0.228833f,   0.934838f,   0.222513f,   0.426623f,  -0.337684f,
      0.361916f,  -0.003518f,  -1.430786f,  -0.176678f,   0.716534f,  -0.049195f,
      0.701033f,   0.247570f,  -0.304524f,   0.006590f,  -0.068412f,   0.695921f,
      0.246117f,  -0.004956f,   0.091362f,  -0.045787f,   0.370283f,   0.348911f,
      0.099323f,   0.118178f,  -0.741173f,   0.688798f,   0.129310f,  -0.198357f,
     -0.186510f,   0.294328f,   0.013826f,   0.241562f,   0.386505f,  -0.197899f,
      0.786544f,  -0.228257f,   0.144046f,   0.739113f,  -0.165330f,   1.334286f,
      0.225182f,  -0.115319f,  -0.376671f,  -0.584772f,   0.379609f,  -0.150288f,
      0.151234f,  -0.055485f,  -0.416636f,  -0.141993f,   0.036559f,  -0.003643f,
     -0.020173f,   0.208172f,  -0.088679f,  -0.196717f,  -0.110130f,   0.331081f,
     -0.089414f,  -0.292068f,   0.836546f,   0.178956f,  -0.009244f,  -0.025303f,
      0.575042f,  -0.092457f,  -0.792070f,  -0.086148f,  -0.337285f,   0.098985f,
     -0.345582f,  -0.385796f,  -0.580932f,  -0.106460f,   0.177964f,  -0.202665f,
     -0.818466f,   0.512044f,  -0.248903f,  -0.176833f,  -0.396283f,  -0.079628f,
     -0.111450f,   0.031262f,  -0.193838f,  -0.265057f,   0.142479f,   0.540568f,
     -0.332041f,   0.561673f,  -0.397768f,  -0.415788f,   0.006603f,   0.251402f,
     -0.255220f,  -0.018296f,  -0.010175f,   0.385624f,   0.074551f,  -0.330382f,
      0.359874f,  -0.143074f,   0.043136f,   0.289460f,  -0.307973f,   0.032802f,
      0.046415f,   0.009540f,   0.327870f,   0.346723f,   0.195016f,   0.106867f,
     -0.156845f,  -0.068639f,  -0.082860f,  -0.144094f,   0.088530f,  -0.010866f,
     -0.340867f,   0.171766f,   0.398464f,   0.634473f,   0.725536f,  -0.494972f,
     -0.365057f,  -0.069656f,  -1.076253f,   0.071945f,   0.523217f,   0.089444f,
      0.644519f,   0.167484f,  -0.337014f,  -0.492360f,   0.007159f,   0.611297f,
     -0.042469f,   0.498460f,  -0.159492f,  -0.608774f,   0.183654f,  -0.236369f,
      0.794919f,   0.176598f,   0.195137f,   0.008701f,  -0.018107f,   0.050436f,
      0.013899f,  -0.071337f,   0.035506f,  -0.100947f,   0.010922f,   0.036077f,
      0.204098f,   0.219173f,  -0.560561f,  -0.383022f,  -0.126983f,   0.319631f,
     -0.106076f,  -0.032966f,  -0.261561f,   0.035160f,   0.378876f,  -0.396099f,
      0.046555f,  -0.424136f,  -0.253461f,   0.181164f,   0.488055f,  -0.276044f,
     -0.419274f,  -0.014124f,   0.392761f,  -0.067932f,   0.132014f,   0.317889f,
     -0.027497f,   0.284389f,   0.146753f,   0.120045f,   0.446145f,  -0.045416f,
     -0.402837f,   0.028299f,  -0.106517f,  -0.103739f,   0.437356f,  -0.015542f,
     -0.043332f,  -0.030797f,   0.220065f,   0.045645f,   0.083565f,  -0.134164f,
      0.151825f,  -0.193704f,  -0.183923f,  -0.123536f,   0.224559f,   0.533843f,
      0.092860f,  -0.011507f,   0.357541f,   0.075595f,  -0.642198f,  -0.149561f,
     -0.358815f,   0.057830f,   0.272092f,   0.148026f,   0.330059f,  -0.728371f,
      0.085321f,   0.304005f,  -0.161754f,   0.219988f,  -0.361920f,   0.512634f,
      0.882402f,   0.128587f,   0.149005f,  -0.458621f,   0.607991f,   0.068293f,
     -1.427768f,   0.018607f,   0.431060f,   0.508512f,   0.609297f,   0.129723f,
     -0.067228f,   0.169398f,  -0.403897f,   0.735047f,   0.123942f,  -0.883840f,
      0.980944f,   0.523521f,  -0.220899f,   0.829706f,   0.082264f,  -0.087006f,
     -1.001945f,   0.401137f,   0.080463f,  -0.069043f,   0.015033f,  -0.024658f,
      0.107166f,  -0.064235f,  -0.149288f,  -0.063656f,  -0.535134f,  -0.047111f,
     -0.019388f,  -0.328839f,   0.309630f,   1.003181f,  -0.167846f,   0.500114f,
      0.076899f,  -0.010359f,   0.118930f,  -0.155264f,  -0.156876f,  -0.245820f,
     -0.378657f,   0.365467f,   0.211351f,  -0.154843f,   0.314282f,   0.256906f,
     -0.221103f,   0.126847f,  -0.285656f,  -0.027400f,  -0.128648f,  -0.015823f,
      0.070871f,   0.003207f,   0.256593f,  -0.106649f,   0.155739f,  -0.052903f,
     -0.040647f,   0.091276f,  -0.377697f,  -0.117913f,  -0.113218f,  -0.261548f,
     -0.111840f,   0.347300f,   0.075448f,  -0.132204f,  -1.577927f,  -0.081275f,
     -0.900956f,   0.079394f,   0.123601f,   1.170422f,   0.036294f,   1.438156f,
      0.885001f,   1.417855f,   0.728309f,   0.002099f,   0.853824f,  -1.494349f,
      0.306449f,   1.306763f,  -1.018035f,  -0.192017f,  -0.484315f,  -0.733000f,
     -0.321267f,   0.111504f,  -0.215747f,   0.047025f,  -0.682855f,   0.166119f,
     -0.189926f,   0.056426f,   0.120131f,  -0.202641f,   0.480170f,   0.140727f,
      0.484053f,   0.005474f,  -0.722582f,  -0.208126f,   0.292631f,   0.171429f,
      0.704658f,  -0.352361f,  -0.396687f,   0.153073f,  -0.724756f,  -0.134828f,
     -0.732066f,   2.324029f,  -0.012324f,  -0.245261f,   0.355545f,   1.670629f,
      0.324136f,  -0.097305f,   0.343362f,  -0.446519f,  -0.025568f,   1.084112f,
     -0.313498f,   0.752983f,   1.439937f,   0.038585f,  -0.391647f,  -0.027203f,
      0.271998f,  -0.180787f,   0.558078f,  -0.424997f,   0.315058f,   0.529159f,
      0.143735f,   0.244701f,   0.062107f,  -0.319935f,  -0.274108f,  -0.237697f,
      0.028634f,  -0.096397f,  -0.330549f,  -0.256803f,  -1.705512f,  -0.361207f,
      0.196398f,   0.565863f,  -0.613864f,   0.395561f,   0.158903f,   0.699191f,
      0.029961f,  -0.616957f,   0.159425f,   0.916301f,  -1.772176f,  -0.198204f,
      0.447768f,   0.108855f,   1.027837f,   0.802136f,  -0.693798f,   0.555932f,
     -0.111452f,   1.360301f,   0.067997f,  -0.013652f,   0.133967f,   0.067888f,
     -0.876166f,   0.565346f,   0.084664f,  -0.041456f,   0.127231f,  -1.083635f,
      0.113933f,   0.544565f,   0.100100f,  -0.301949f,  -0.589716f,  -0.599824f,
     -0.298836f,   0.673024f,   0.583351f,   0.199788f,   0.826925f,  -0.124609f,
     -0.836823f,   0.116325f,   1.293516f,   0.253786f,  -0.141191f,   0.388246f,
      0.136415f,  -0.432542f,  -0.821010f,  -0.546263f,   0.829734f,  -0.345641f,
      0.153634f,   0.353529f,  -1.349161f,   0.452827f,  -0.686190f,   0.010173f,
      0.198596f,  -0.027547f,  -0.765480f,   0.066641f,  -0.295724f,   0.024363f,
     -0.293934f,   0.227651f,   0.245811f,   0.556148f,   0.803863f,  -0.039559f,
      0.324521f,  -1.640892f,  -0.407928f,   0.587650f,  -0.757103f,   0.467053f,
     -0.296248f,  -0.632741f
};

const float PROGMEM BIAS_L1[20] = {
     -0.245458f,   0.329212f,   1.024324f,   0.643050f,  -0.023928f,  -0.294200f,  -0.002407f,  -0.072695f,   0.080599f,  -0.419094f,   0.340334f,  -0.059864f,  -0.396852f,  -0.719769f,   0.187789f,  -0.627388f,   0.190652f,  -0.133415f,  -0.674442f,   0.140765f
};

// Couche 2:  20 entrées → 10 sorties
const float PROGMEM WEIGHTS_L2[200] = {
     -0.463030f,  -0.685584f,   0.863672f,  -0.683058f,   0.687888f,   1.144720f,
      0.754506f,   0.289576f,  -0.423596f,   1.024724f,   0.053280f,   0.750135f,
     -0.358940f,   0.448099f,   0.125001f,   0.131454f,  -0.207427f,  -0.097551f,
      0.433334f,  -0.334446f,  -0.429550f,  -0.998987f,   0.003786f,  -0.568837f,
      0.553272f,   1.029227f,  -0.170544f,  -0.253901f,  -0.130439f,   0.787681f,
      0.142143f,   0.573005f,   0.872911f,   0.568725f,  -0.346760f,  -0.661202f,
     -0.151837f,  -0.210454f,   0.099923f,  -0.483166f,  -0.197037f,  -1.338376f,
      0.979171f,  -0.955765f,  -0.089583f,   0.622984f,   0.390507f,  -0.425194f,
     -0.982247f,   0.486432f,   0.725618f,   1.328465f,   0.830590f,   1.613724f,
     -0.350628f,  -1.084432f,  -0.518667f,  -0.108937f,   0.348362f,  -0.650247f,
      0.150440f,   0.211624f,   0.708225f,   0.124433f,  -0.055578f,  -0.150674f,
      0.037899f,  -0.104869f,   0.142972f,  -0.193983f,  -0.173132f,   1.051755f,
      0.287136f,   0.667890f,  -0.483496f,  -1.347781f,  -0.314980f,   0.005048f,
     -0.117218f,  -0.172999f,   0.137041f,   0.704926f,   0.498078f,   0.610580f,
     -0.573588f,  -0.680789f,  -0.491323f,   0.007702f,   0.170633f,  -0.563875f,
      0.278659f,   0.739183f,   0.517384f,   1.085598f,  -0.447078f,  -1.259717f,
     -0.316556f,  -0.382909f,   0.514266f,  -1.524856f,   0.083087f,   2.007317f,
     -0.420003f,   1.405384f,  -0.635697f,  -1.270164f,  -0.267503f,  -0.043531f,
      1.023519f,  -1.249084f,   0.308437f,  -0.052907f,  -0.393014f,   0.128346f,
      0.122237f,  -0.325052f,   0.081529f,  -0.156531f,   0.064386f,   0.113380f,
      0.127876f,   0.875590f,   0.437379f,   0.656585f,  -0.591443f,  -0.654756f,
     -0.257067f,  -0.103064f,  -0.259469f,  -0.429436f,  -0.006679f,  -1.093429f,
      0.062204f,  -0.797497f,   0.969413f,   1.066591f,  -0.021581f,   0.138725f,
     -0.573252f,   1.016752f,  -0.552124f,   0.320712f,   0.599940f,  -0.012246f,
      0.666484f,   1.410578f,   0.264862f,  -0.283573f,  -0.172506f,   0.698539f,
      0.148279f,   1.155382f,   0.221745f,   0.896803f,  -0.411757f,  -0.188109f,
     -0.244714f,  -0.228701f,   0.295906f,  -0.933451f,  -0.262070f,  -1.063236f,
     -0.352232f,  -0.957019f,  -0.021735f,   0.693082f,  -0.038933f,   0.088395f,
     -0.206044f,   0.322847f,   0.109186f,   0.451536f,  -0.199305f,   0.608018f,
      0.052744f,   0.565965f,  -0.035449f,   0.350683f,   0.275035f,   0.718326f,
      0.191236f,  -0.212281f,  -1.323405f,   0.220683f,   0.597579f,   2.025457f,
     -0.230025f,   0.284277f,   0.250064f,   1.157565f,  -0.377906f,  -0.450796f,
      0.530236f,  -0.748106f,   0.643675f,   1.113107f,  -0.515628f,   0.058856f,
     -0.086578f,   0.813872f
};

const float PROGMEM BIAS_L2[10] = {
     -0.120561f,   0.534169f,   0.342317f,   0.604363f,  -0.043907f,   0.035130f,   0.082980f,  -0.109853f,   0.172255f,   0.020274f
};

// Couche 3:  10 entrées → 3 sorties
const float PROGMEM WEIGHTS_L3[30] = {
     -0.882017f,  -0.625566f,   0.428951f,  -3.901706f,   1.146699f,   2.748174f,
      1.185648f,  -1.983358f,   0.810646f,  -3.259601f,   0.870627f,   2.629059f,
      1.191443f,   0.586139f,  -1.605456f,   1.285484f,   1.961373f,  -3.957548f,
      0.506790f,  -0.614639f,  -0.385738f,  -0.038016f,  -0.005443f,  -0.239520f,
     -1.180586f,   0.336561f,   1.326429f,   2.351240f,   0.436419f,  -3.284621f
};

const float PROGMEM BIAS_L3[3] = {
      0.178335f,  -0.333885f,   0.155550f
};

#endif // MILDIOU_NN_WEIGHTS_H
